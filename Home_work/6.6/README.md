## Задача 1

### Напишите список операций, которые вы будете производить для остановки запроса пользователя:

###### Погуглив я нашел не множественные ответы:

###### Запросить текущие запущенные операции

```
db.currentOp()
```

###### Убить операцию на основе opid:

```
db.killOp(pid)
```



### Предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB:

###### Первое куда нужно смотреть если запросы совсем зависают то это на параметр maxPoolSize, что бы узнать количество текущих соединений можно воспользоваться командой  connPoolStats, если имеется превышение запросов то следует увеличить стандартный параметр  на 15-20%, дальше нужно пытаться оптимизировать запрос, перестраивать и добавлять индексы, использовать движок WiredTiger  с достаточным количеством памяти и ядрами.

## Задача 2
 
### Сначала рост отношения записанных значений к истекшим, Redis блокирует операции записи, как вы думаете, в чем может быть проблема:

###### В базе данных есть много-много ключей, срок действия которых истекает в одну и ту же секунду, и они составляют не менее 25% текущей совокупности ключей с установленным сроком действия , Redis может заблокировать запись, чтобы получить процент ключей, срок действия которых уже истек ниже 25%

## Задача 3

```
InterfaceError: (InterfaceError) 2013: Lost connection to MySQL server during query u'SELECT..... 
```

### Как вы думаете, почему это начало происходить и как локализовать проблему,какие пути решения данной проблемы вы можете предложить?

###### Первое что мне приходит в голову это проблема с сетью, нужно проверить доступность до сервера БД, далее смотрим что пишет mysql в логи если есть ошибки то исправляем, еще может быть что запрос очень большой и все строки не успевают передаваться за 30 сек, то стоит увеличить время запроса net_read_timeout, можно еще увеличить  connect_timeout значение для подключения, может быть такое что канал сильно загружен и соединение проходит долго, если не помогло то нужно пересмотреть запрос и оптимизировать его.

## Задача 4

### После запуска пользователи начали жаловаться, что СУБД время от времени становится недоступной. В dmesg вы видите, что:

```
postmaster invoked oom-killer
```

### Как вы думаете, что происходит,как бы вы решили данную проблему?

###### Думаю при переходе на psql серверу не выделили дополнительной оперативной памяти и процесс OOM-killer завершает процесс psql что бы не положить ядро системы и ОС продолжала работать, если сервере очень ограничен по ресурсам то можно дать процессу psql наименьший приоритет при выборе убийства процесса OOM Killer

```
sudo echo -1000 > /proc/pid/oom_score_adj
```
